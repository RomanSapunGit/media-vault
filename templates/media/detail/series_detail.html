{% extends 'layouts/base_presentation.html' %}
{% load query_transform %}

{% block title %}
  film {{ series.title }}
{% endblock %}

{% block content %}
  {% load query_transform %}


  <div class="py-10 row g-4 justify-content-center">
    <div class="col-md-6 col-lg-7">
      <div class="card shadow-sm h-100">
        <div class="card-body d-flex flex-column">

          <div class="d-flex">
            <h5 class="card-title text-primary">{{ series.title }}</h5>
            <div class="ms-auto">
            <a class="btn btn-outline-dark mb-0" href="{% url 'media:series_update' pk=series.id %}">
                  Update
              </a>

              <button
                class="btn btn-outline-danger mb-0"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal">
                Delete
              </button>

              {% include 'media/form/modal/media_delete_modal.html' %}

            </div>
          </div>

          <p class="card-text text-muted small">
            Description: <br>
            {{ series.description }}
          </p>

          <div class="mb-2">

            <span class="badge bg-gradient-secondary">
              Country: {{ series.country }}
            </span>

            <span class="badge bg-gradient-light text-dark">
             Created on: {{ series.created_at }}
            </span>
             <span class="badge bg-info text-dark">
              <a href="{% url 'media:book_list' %}?status={{ series.get_status_display }}"
                 class="text-decoration-none text-dark">
                Status: {{ series.get_status_display }}
              </a>
            </span>
            <span class="badge bg-info text-dark">
              <a href="{% url 'media:book_list' %}?type={{ series.get_type_display }}"
                 class="text-decoration-none text-dark">
                Type: {{ series.get_type_display }}
              </a>
            </span>
            <span class="badge bg-gradient-info">
              Seasons: {{ series.seasons }}
            </span>
            <span class="badge bg-gradient-info">
              Series number: {{ series.series_number }}
            </span>
          </div>

          {% if series.creators.exists %}
            <div class="pt-4 mb-2">
              <strong>Author{{ series.creators.all|length|pluralize }}:</strong>
              {% for creator in series.creators.all %}
                <span class="badge bg-light border text-dark me-1 mb-2">
                  {{ creator.first_name }}
                    {{ creator.last_name }}
                </span>
              {% endfor %}
            </div>
          {% else %}
            <div class="mb-2">
              <strong>Author unknown</strong>
            </div>
          {% endif %}

          {% if series.genres.exists %}
            <div class="d-flex flex-wrap gap-1 mt-auto">
              {% for genre in series.genres.all %}
                <a class="badge rounded-pill bg-gradient-success text-white text-decoration-none"
                   href="{% url 'media:series_list' %}?genres={{ genre.name }}">
                  {{ genre.name }}
                </a>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
