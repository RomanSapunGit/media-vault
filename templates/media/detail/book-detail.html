{% extends 'layouts/base-presentation.html' %}

{% block title %}
  book {{ book.title }}
{% endblock %}

{% block content %}
  {% load query_transform %}


  <div class="py-10 row g-4 justify-content-center">
    <div class="col-md-6 col-lg-7">
      <div class="card shadow-sm h-100">
        <div class="card-body d-flex flex-column">

          <div class="d-flex">
            <h5 class="card-title text-primary">{{ book.title }}</h5>
            <div class="ms-auto">

              <button class="btn btn-outline-dark mb-0">
                Update
              </button>

              <button
                class="btn btn-outline-danger mb-0"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal">
                Delete
              </button>

              {% include 'media/form/media-delete-modal-form.html' %}

            </div>
          </div>

          <p class="card-text text-muted small">
            Description: <br>
            {{ book.description }}
          </p>

          <div class="mb-2">

            <span class="badge bg-secondary">
              {{ book.chapters }} chapters
            </span>

            <span class="badge bg-info text-dark">
              <a href="{% url 'media:book_list' %}?type={{ book.get_type_display }}"
                 class="text-decoration-none text-dark">
                {{ book.get_type_display }}
              </a>
            </span>

            <span class="badge bg-light text-dark">
             Created on: {{ book.created_at }}
            </span>

          </div>

          {% if book.creators.exists %}
            <div class="pt-4 mb-2">
              <strong>Author{{ book.creators.all|length|pluralize }}:</strong>
              {% for creator in book.creators.all %}
                <span class="badge bg-light border text-dark me-1 mb-2">
                  {{ creator.first_name }}
                    {{ creator.last_name }}
                </span>
              {% endfor %}
            </div>
          {% else %}
            <div class="mb-2">
              <strong>Author unknown</strong>
            </div>
          {% endif %}

          {% if book.genres.exists %}
            <div class="d-flex flex-wrap gap-1 mt-auto">
              {% for genre in book.genres.all %}
                <a class="badge rounded-pill bg-success text-white text-decoration-none"
                   href="?{% query_transform request=request genres=genre.name %}">
                  {{ genre.name }}
                </a>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
