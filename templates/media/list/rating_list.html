{% extends 'layouts/base_presentation.html' %}
{% load query_transform %}

{% block title %}
  review list
{% endblock %}

{% block content %}


  <div class="pt-7 pb-2">
    {% include 'includes/search.html' %}
  </div>

  {% include 'includes/media_filter.html' %}

  <div class="d-flex flex-column gap-4 flex-md-row justify-content-center mb-3">
    <a href="{% url 'media:rating_create' %}" class="btn btn-outline-secondary mb-auto mx-2">
      Create
    </a>
  </div>


  <div class="mx-1 row g-4 justify-content-center">
    {% for rating in rating_list %}
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">
            <h5>
              <a class="h5 card-title text-primary" href="{% url 'media:rating_detail' pk=rating.id %}">
                {{ rating.media.media_type }} <br><br> Title: {{ rating.media.title }}
              </a>
            </h5>
            <h6 class="h5 card-background text-info">
               Rating: {{ rating.rating }}
            </h6>
            <div class="mb-2">
              <strong>By:</strong>
              <a href="{% url 'media:user_detail' pk=rating.user.id %}">
                <span class="badge bg-light border text-dark me-1 mb-2">
                 {{ rating.user.username }}
                </span>
              </a>
            </div>

            <p class="card-text text-muted small">
              {{ rating.review|truncatechars:200 }}
            </p>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="text-center mx-auto col-sm-9">
        <p class="mb-0 h5">Nothing to show yet</p>
      </div>
    {% endfor %}
  </div>
{% endblock %}
